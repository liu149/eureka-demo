plugins {
	id 'java'
	id 'application'
	id 'maven-publish'
	id 'maven'
}

application {
	mainClass='com.example.eurekademo.EurekaDemoApplication'
}

group = 'com.example'
version = '0.0.1-SNAPSHOT-2'
sourceCompatibility = '1.8'

repositories {
	mavenCentral()
}

dependencies {
	compile 'org.springframework.cloud:spring-cloud-starter-netflix-eureka-server:2.1.3.RELEASE'
}

distributions {
	main {
		contents {
			from('src/main/resources') {
				into 'config'
			}
		}
	}
}

publishing {
	publications {
		zip(MavenPublication) {
			artifact source: distZip, extension: 'zip'
		}
	}

	repositories {
		maven {
			name 'release'
			credentials {
				username 'admin'
				password 'admin123'
			}
			url 'http://42.192.143.36:8081/repository/maven-releases/'
		}
	}
}

build.dependsOn distZip
publish.dependsOn build

